    <script>
        // Link này trỏ thẳng tới file Bot đã lọc
        const M3U_URL = 'https://raw.githubusercontent.com/HDHTN/BDL/main/hfb_list.m3u';
        
        const v = document.getElementById('v');
        const list = document.getElementById('list');
        const menu = document.getElementById('menu');
        const btn = document.getElementById('back-btn');

        async function load() {
            try {
                // Thêm timestamp để TV luôn tải bản mới nhất, không dùng bản cũ trong bộ nhớ
                const res = await fetch(M3U_URL + '?t=' + new Date().getTime());
                const text = await res.text();
                const lines = text.split('\n');
                let html = '';
                
                for (let i = 0; i < lines.length; i++) {
                    if (lines[i].includes('#EXTINF')) {
                        let name = lines[i].split(',')[1] || "Kênh không tên";
                        let url = lines[i+1]?.trim();

                        // Không cần lọc 'vs' nữa, vì Bot đã lọc theo ý bạn ở trên server rồi
                        if (url && url.startsWith('http')) {
                            html += `<div class="ch" onclick="play('${url}')">${name}</div>`;
                        }
                    }
                }
                list.innerHTML = html || '<div class="ch">Danh sách trống!</div>';
            } catch (e) { list.innerHTML = '<div class="ch">Lỗi kết nối M3U!</div>'; }
        }

        function play(url) {
            menu.style.display = 'none';
            btn.style.display = 'block';
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(v);
                hls.on(Hls.Events.MANIFEST_PARSED, () => v.play());
            } else { 
                v.src = url; 
                v.play();
            }
        }

        function showMenu() {
            v.pause();
            menu.style.display = 'block';
            btn.style.display = 'none';
        }

        load();
    </script>
